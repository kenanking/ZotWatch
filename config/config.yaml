# ZotWatch Configuration

zotero:
  mode: "api"
  api:
    user_id: "${ZOTERO_USER_ID}"
    api_key: "${ZOTERO_API_KEY}"
    page_size: 100
    polite_delay_ms: 200

sources:
  arxiv:
    enabled: true
    categories:
      - "cs.LG"   # Machine Learning
      - "cs.CV"   # Computer Vision and Pattern Recognition
      - "cs.AI"   # Artificial Intelligence
      - "stat.ML" # Machine Learning (Statistics)
    days_back: 2
    max_results: 3000
  crossref:
    enabled: true
    mailto: "${CROSSREF_MAILTO}"
    days_back: 1
    max_results: 3000
  # Abstract scraper for enriching missing abstracts (Camoufox + rule-based + LLM fallback)
  scraper:
    enabled: true
    rate_limit_delay: 1.0  # Seconds between requests
    timeout: 60000  # Page load timeout (ms)
    max_retries: 2  # Retry attempts per URL
    max_html_chars: 15000  # Max HTML chars to send to LLM
    llm_max_tokens: 1024  # Max tokens for LLM extraction response
    llm_temperature: 0.1  # Low temperature for accurate extraction
    use_llm_fallback: true  # Use LLM when rule extraction fails

scoring:
  thresholds:
    must_read: 0.75
    consider: 0.55

  # User research interests for featured recommendations (optional)
  interests:
    enabled: true
    description: |
      我现在重点关注下面的研究方向：
      1) SAR 图像目标识别、检测、跟踪，尤其针对舰船目标
      2) 多源传感器融合，尤其是 SAR 与红外的融合
      3) 视觉基础模型预训练（例如：CLIP、MAE、DINO、JEPA 等相关方法）
      4) 大语言模型的最新进展
      5) 希望排除生物医学领域的研究
    top_k_recall: -1  # FAISS recall count, -1 to skip FAISS and use all candidates
    top_k_featured: 5  # Final featured papers count

  # Voyage Rerank settings (uses VOYAGE_API_KEY)
  rerank:
    enabled: true
    model: "rerank-2.5"

embedding:
  provider: "voyage"
  model: "voyage-3.5"
  api_key: "${VOYAGE_API_KEY}"
  input_type: "document"
  batch_size: 128

# LLM Configuration for AI summaries
# Supported providers: "openrouter", "kimi"
llm:
  enabled: true
  provider: "kimi"
  api_key: "${MOONSHOT_API_KEY}"
  model: "kimi-k2-turbo-preview"
  max_tokens: 5120
  temperature: 0.3
  retry:
    max_attempts: 3
    backoff_factor: 2.0
    initial_delay: 1.0
  summarize:
    top_n: 20
    cache_expiry_days: 30

# Example Kimi configuration (uncomment to use):
# llm:
#   enabled: true
#   provider: "kimi"
#   api_key: "${MOONSHOT_API_KEY}"
#   model: "kimi-k2-thinking-turbo"  # or "kimi-k2-turbo-preview"
#   max_tokens: 16000  # Thinking models need >=16000
#   temperature: 1.0   # Thinking models recommend 1.0, normal models 0.6

# Output Configuration
output:
  rss:
    title: "ZotWatch Feed"
    link: "https://example.com"
    description: "AI-assisted literature watch"
  html:
    template: "report.html"
    include_summaries: true
